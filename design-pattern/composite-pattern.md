# 컴포지트 패턴 Composite Pattern

객체를 트리구조로 구성해서 부분-전체 계층 구조를 구현 (part-whole hierarchy) 클라이언트에서 개별 객체와 복합 객체를 똑같은 방법으로 다룰 수 있음

### 다이어그램

![C# Composite Design Pattern - Dofactory](https://www.dofactory.com/img/diagrams/net/composite.png)

### 장점

일관되게 프로그래밍 할 수 있음 사용자의 코드가 단순해짐 새로운 구성요소를 쉽게 추가할 수 있음

## 투명성 transparency VS 안전성

투명성과 안정성 사이에서 어떤 것을 선택해야 하나?

### 투명성

* 자식을 관리하는 인터페이스를 최상위 클래스에 정의하면 서브클래스에서도 모두 동일한 인터페이스가 유지 -> 사용자에게 인터페이스의 투명성을 부여
* 단, Leaf 클래스가 Add() 나 Remove() 와 같은 연산을 하지 못하도록 안전성 유지를 위해 추가로 작업을 해야함
  * 아무동작도 하지 않게 하거나, null 혹은 false를 반환하게 하거나, 예외를 던지거나

### 안전성

* Composite 클래스에서만 자식을 관리 -> 안전성 부여
* 단, Leaf 클래스와 Composite 클래스가 서로 다른 인터페이스를 가지게 되므로, 사용자는 이를 동일한 대상으로 사용할 수 없음
  * 객체를 올바르게 캐스팅 하기 위해 조건문이나 InstanceOf 를 사용해서 형식을 확인해줘야 함

\-> 컴포지트 패턴에서는 투명성을 강조

* Leaf 클래스도 어찌보면 자식이 없는 Composite 클래스로 볼 수도 있기 때문에)
