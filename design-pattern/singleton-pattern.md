# 싱글턴 패턴 Singleton Pattern

## 싱글턴 패턴 Singleton Pattern

* 클래스 인스턴스를 하나만 만들고, 그 인스턴스로의 전역 접근을 제공
* 게으른 방식(lazyinit)으로 생성되도록 구현하면 자원을 효율적으로 사용할 수 있음



### 전역 변수와의 차이

* 전역 변수는 게으른 방식으로 생성할 수 없고, 객체의 전역 레퍼런스를 자꾸 만들게 되어 네임스페이스가 지저분해질 수 있음



### 멀티 스레딩&#x20;

#### 문제

* 멀티 스레드에서 객체 생성 조건 확인 & 생성 부분이 이상하게 겹치면 스레드마다 인스턴스가 생성되고 오동작할 위험이 있음

#### 해결방안

* 방법 1) getInstance() 자체를 동기화 처리하기&#x20;
  * 시간이 오래 걸림(100배정도 느림)
  * 간단, 너무 오래 걸려서 문제가 되는 상황이 아니면 괜찮은 해결 방식일지도
* 방법 2) 인스턴스를 처음부터 만들어놓기
  * 이상하게 보일 수 있음
  * 매우 간단
* 방법 3) DCL Double-Checked Lock 사용해서 인스턴스 생성 여부 확인하기
  * 복잡
  * 속도 이슈 해결 가능

### enum class

자바의 enum 을 사용하면 간단하게 싱글턴 구현 가능

동기화 문제, 클래스 로딩 문제, 리플렉션, 직렬화와 역직렬화 등등의 문제도 발생하지 않음!



### 코틀린

* Object
  * 단, 프로세스가 메모리에 올라갈 때 곧바로 생성되어 버림(사용하지 않더라도 불필요하게 메모리를 잡아먹음) > 내부 값들은 By lazy 로 지연 생성하기
