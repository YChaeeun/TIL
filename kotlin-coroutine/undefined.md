# 스레드와 코루틴

{% embed url="https://stackoverflow.com/questions/1934715/difference-between-a-coroutine-and-a-thread" %}

## 동시성concurrency vs 병렬성parallelism

* 병렬은 동시성을 의미할 수 있지만, 동시성이 병렬을 의미하는 것은 아니다
* 동시성&#x20;
  * 두 개 이상의 알고리즘의 실행 시간이 겹쳐질 때 발생
  * ex ) 단일 코어에서 2개 이상의 스레드의 instruction을 교차배치해서 스레드의 실행을 효율적으로 겹쳐서 실행하는 것
* 병렬성
  * 두 개 이상의 알고리즘이 정확히 같은 시간에 실행되는 것으로 2개 이상의 코어와 2개 이상의 스레드가 각각 같은 시간에 실행되는 것

<figure><img src="../.gitbook/assets/스크린샷 2024-05-20 오전 8.17.49.png" alt=""><figcaption></figcaption></figure>

## 프로세스 process

* 실행 중인 애플리케이션의 인스턴스 (애플리케이션이 시작될 때 마다 애플리케이션의 프로세스가 시작됨)
* 상태를 가지고 있음
  * 리소스를 여는 핸들, 프로세스 Id, 데이터, 네트워크 연결 등등
  * 프로세스 내부 스레드가 상태에 접근할 수 있다
* 애플리케이션은 여러 프로세스로 구성될 수 있음



## 스레드Thread

* 프로세스가 실행할 일련의 명령으로, 프로세스는 최소한 한개 이상의 스레드를 포함
  * 메인 스레드 - 애플리케이션의 진입점을 실행하기 위해 생성되는 스레드로, 해당 스레드가 끝나면 다른 스레드와 상관없이 프로세스 종료됨
* 스레드는 자체 저장소를 가지고 있음
* 해당 스레드가 속한 프로세스에 포함된 리소스에 접근하고 수정할 수 있으며, 스레드간 서로 소통 가능
* 스레드 안에서 명령은 한 번에 하나씩 수행, block 되면 끝날 때 까지 같은 스레드에서 다른 명령을 실행할 수 없음
  * ex) UI 스레드 - 사용자 경험을 위해 해당 스레드는 블록하면 안된다!

## 코루틴Coroutine

* 경량 스레드라고도 부름
* 프로세스가 실행할 명령어 집합의 실행을 정의, 스레드와 비슷한 라이프사이클
* 스레드 안에서 실행됨 (여러 개의 코루틴이 있을 수 있음)
  * 단, 주어진 시간에 하나의 스레드에서 하나의 명령만 실행됨
* **스레드 안에서 실행되지만, 특정 스레드와 묶여있지는 않음**
  * **코루틴의 일부를 스레드 X 에서 실행, 실행 중지한 다음 스레드 Y에서 다음 작업 수행도 가능**
  * **코틀린이 실행가능한 스레드로 코루틴을 이동시킨다**



## 스레드 vs 코루틴

* 코루틴은 빠르고 적은 비용으로 생성할 수 있다

