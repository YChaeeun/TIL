---
description: 람다로 프로그래밍
---

# 5장

### 람다 lambda expression

* 다른 함수에 넘길 수 있는 작은 코드 조각
* 람다를 사용하면 공통 코드 구조를 라이브러리 함수로 뽑아낼 수 있다!

### 람다 식과 멤버 참조

#### 람다와 컬렉션

* 람다를 사용하면 컬렉션을 편리하게 처리할 수 있다
* 컬렉션에서 최대 값을 찾고 싶다면?
  * for 루프를 계속 돌릴 수도 있겠징,,
  * 대신 람다를 사용하면 간단하게 표현 가능!
    *  `people.maxBy{it.age}`  혹은 `people.maxBy() {it.age}`
    *  `people.maxBy(Person::age)`

#### 람다식의 문법

* `{ x: Int, y: Int -> x + y }`
  * 항상 중괄호{} 로 둘러싸여 있음
  * 파라미터 `->` 본문  \( `->` 로 구분\)
  * 함수 호출 시 맨 뒤가 람다 식이라면 \(\) 밖으로 빼낼 수 있음
    * `maxBy() { }`  요런 식으로  
* run
  * 코드 일부분을 블록처럼 둘러싸 실행하고 싶을 때 사용

#### 람다가 포획capture 한 변수

* 코틀린에서는 람다 안에서 외부 변수를 사용할 수 있는데, 이를 람다가 포획한 변수라고 부른다
* 파이널이 아닌 변수에도 접근 가능하고, 변수를 변경하는 것도 가능
* 단, 람다를 이벤트 핸들러나 다른 비동기적으로 실행되는 코드로 활용하는 경우
  * 함수가 호출되고 나서 로컬 변수가 변경될 수 있
  * 이때는 람다가 제대로 동작 안 할 수도
* **변수의 생명주기**
  * 보통 함수 안에 정의된 로컬 변수의 생명주기는 함수가 리턴되면서 끝남
  * 그런데 어떤 함수가 로컬 변수를 포획한 람다를 반환하거나 다른 변수에 저장하는 경우, 로컬 변수의 생명주기가 함수의 생명주기와 달라질 수 있다
* **람다의 변수 처리**
  * 파이널 변수인 경우
    * 람다 코드를 변수 값과 함께 저장
  * 일반 변수인 경우
    * 변수를 특별한 래퍼로 감싸서 나중에 변경하거나 읽을 수 있게 한 다음, 래퍼에 대한 참조를 람다 코드와 함께 저장한다

#### 멤버 참조 member reference

* :: 를 사용하는 식을 멤버 참조 member reference 라고 부른다
  * 프로퍼티나 메소드를 단 하나만 호출하는 함수 값을 만들어 줌
  * 최상위에 선언된 \(다른 클래스의 멤버가 아닌\) 함수나 프로퍼티도 참조 가능!

    ```kotlin
    fun hello() = "Hello~!"
    run(::hello) // :: 멤버 참조, 클래스 명 생략

    >> Hello~!
    ```
* 람다가 작업을 다른 함수에게 위임할 경우, 람다 식으로 쓰지 않고 바로 멤버 참조를 하면 간단하게 표현이 가능하다

  ```kotlin
  val action = {p: Person, m: Message -> sendEmail(p,m)} 
                  // sendEmail() 함수에게 작업을 위임하는 람다
                
  val nextAction = ::sendEmail  // 람다 대신 멤버 참조를 쓸 수 있다
  ```

* 생성자 참조 constructor reference

  * 클래스 생성을 연기하거나 저장해 둘 수 있음 ::클래스이름

  ```kotlin
  data class Person(val name: St
  ```

